import e from"style-dictionary/lib/utils/deepExtend.js";import n from"style-dictionary/lib/utils/flattenProperties.js";import{defaultTheme as t}from"./defaultTheme.mjs";import{setupTokens as o,cssNameTransform as a,cssValue as i}from"./utils.mjs";const r=({token:e,path:n})=>{const t=`--${a({path:n})}`,{value:o}=e,r=i(e);return{name:t,original:o,path:n,value:r,toString:()=>`var(${t})`}};function s(a,i=t){const s=e([{},i,a]),m=o({tokens:s.tokens,setupToken:r}),{breakpoints:l,name:p}=s;let d=`[data-amplify-theme="${p}"] {\n`+n(m).map((e=>`${e.name}: ${e.value};`)).join("\n")+"\n}\n",$=[];return s.overrides&&($=s.overrides.map((e=>{const t=o({tokens:e.tokens,setupToken:r}),a=n(t).map((e=>`${e.name}: ${e.value};`)).join("\n");if("selector"in e&&(d+=`\n${e.selector} {\n${a}\n}\n`),"mediaQuery"in e&&(d+=`\n@media (${e.mediaQuery}) {\n  [data-amplify-theme="${p}"] {\n    ${a}\n  }\n}\n`),"breakpoint"in e){const n=s.breakpoints.values[e.breakpoint];d+=`\n@media (min-width: ${n}px) {\n  [data-amplify-theme="${p}"] {\n    ${a}\n  }\n}\n`}return"colorMode"in e&&(d+=`\n@media (prefers-color-scheme: ${e.colorMode}) {\n          [data-amplify-theme="${p}"][data-amplify-color-mode="system"] {\n${a}\n}\n        }\n`,d+=`\n[data-amplify-theme="${p}"][data-amplify-color-mode="${e.colorMode}"] {\n${a}\n}\n`),Object.assign(Object.assign({},e),{tokens:t})}))),{tokens:m,breakpoints:l,name:p,cssText:d,overrides:$}}export{s as createTheme};
